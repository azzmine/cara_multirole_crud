# ðŸ“š Sistem Manajemen Nilai - Dokumentasi Lengkap

## Daftar Isi
1. [Setup Awal](#1-setup-awal)
2. [Database & Multi Role](#2-database--multi-role)
3. [Profile Management](#3-profile-management)
4. [Mata Pelajaran (Mapel)](#4-mata-pelajaran-mapel)
5. [Assign Guru ke Mapel](#5-assign-guru-ke-mapel)
6. [Nilai (Guru)](#6-nilai-guru)
7. [Dashboard Siswa](#7-dashboard-siswa)
8. [Troubleshooting](#troubleshooting)

---

## 1. Setup Awal

### Download & Install Laragon
```bash
# Download Laragon 6.0 dari website
# Download ZIP PHP 8.4 atau lebih
# Buat folder: \laragon\bin\php\php-8.4
# Extract ZIP PHP ke folder tersebut
# Ganti versi PHP di Laragon ke 8.4
```

### Buat Project Laravel
```bash
# Buka Terminal Laragon
# Pastikan Node.js v18+

composer create-project laravel/laravel project-zmm
cd project-zmm
composer require laravel/breeze --dev
php artisan breeze:install blade
npm install && npm run dev  # Terminal 1
php artisan serve           # Terminal 2 (terpisah)
```

---

## 2. Database & Multi Role

### 2.1 Setup Database SQLite
```bash
# Cek extension
php -m | findstr /i sqlite

# Jika belum aktif: buka php.ini, aktifkan extension=sqlite3, restart

# Buat database
type nul > database\database.sqlite
```

**Edit `.env`:**
```env
DB_CONNECTION=sqlite
DB_DATABASE=C:/laragon/www/project-zmm/database/database.sqlite
```

```bash
php artisan config:clear
```

### 2.2 Buat Role Model & Migration
```bash
php artisan make:model Role -m
```

**`database/migrations/xxxx_create_roles_table.php`:**
```php
public function up(): void
{
    Schema::create('roles', function (Blueprint $table) {
        $table->id();
        $table->string('name')->unique();
        $table->timestamps();
    });
}
```

**`app/Models/Role.php`:**
```php
protected $fillable = ['name'];

public function users() {
    return $this->hasMany(User::class);
}
```

### 2.3 Tambah role_id ke Users
```bash
php artisan make:migration add_role_id_to_users --table=users
```

**Migration:**
```php
public function up(): void
{
    Schema::table('users', function (Blueprint $table) {
        $table->foreignId('role_id')->nullable()->constrained()->onDelete('set null');
    });
}
```

**Update `app/Models/User.php`:**
```php
protected $fillable = ['name', 'email', 'password', 'role_id'];

public function role() {
    return $this->belongsTo(Role::class);
}

public function isAdmin() {
    return $this->role->name === 'admin';
}

public function isGuru() {
    return $this->role->name === 'guru';
}

public function isSiswa() {
    return $this->role->name === 'siswa';
}
```

### 2.4 Seeder
**`database/seeders/DatabaseSeeder.php`:**
```php
<?php
namespace Database\Seeders;
use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Hash;

class DatabaseSeeder extends Seeder
{
    public function run(): void
    {
        DB::table('roles')->insert([
            ['name' => 'admin', 'created_at' => now(), 'updated_at' => now()],
            ['name' => 'guru', 'created_at' => now(), 'updated_at' => now()],
            ['name' => 'siswa', 'created_at' => now(), 'updated_at' => now()],
        ]);

        DB::table('users')->insert([
            ['name' => 'Admin', 'email' => 'admin@gmail.com', 'password' => Hash::make('password'), 'role_id' => 1, 'created_at' => now(), 'updated_at' => now()],
            ['name' => 'Guru', 'email' => 'guru@gmail.com', 'password' => Hash::make('password'), 'role_id' => 2, 'created_at' => now(), 'updated_at' => now()],
            ['name' => 'Siswa', 'email' => 'siswa@gmail.com', 'password' => Hash::make('password'), 'role_id' => 3, 'created_at' => now(), 'updated_at' => now()],
        ]);
    }
}
```

### 2.5 Middleware CheckRole
```bash
php artisan make:middleware CheckRole
```

**`app/Http/Middleware/CheckRole.php`:**
```php
use Illuminate\Support\Facades\Auth;

public function handle(Request $request, Closure $next, string $role): Response
{
    if (!Auth::check()) {
        return redirect('/login');
    }

    if (!Auth::user()->role) {
        Auth::logout();
        return redirect('/login')->with('error', 'User tidak memiliki role');
    }

    if (Auth::user()->role->name !== $role) {
        abort(403, 'Unauthorized');
    }

    return $next($request);
}
```

**Register di `bootstrap/app.php`:**
```php
->withMiddleware(function (Middleware $middleware) {
    $middleware->alias([
        'checkrole' => \App\Http\Middleware\CheckRole::class,
    ]);
})
```

### 2.6 Controllers
```bash
php artisan make:controller Admin/DashboardController
php artisan make:controller Admin/UserController --resource
php artisan make:controller Guru/DashboardController
php artisan make:controller Siswa/DashboardController
```

**Controllers sudah dibuat di langkah sebelumnya** âœ…

### 2.7 Routes Dasar
**`routes/web.php`:**
```php
use App\Http\Controllers\Admin\{DashboardController as AdminDashboard, UserController};
use App\Http\Controllers\Guru\DashboardController as GuruDashboard;
use App\Http\Controllers\Siswa\DashboardController as SiswaDashboard;
use Illuminate\Support\Facades\Auth;

Route::middleware(['auth', 'checkrole:admin'])->prefix('admin')->name('admin.')->group(function () {
    Route::get('/dashboard', [AdminDashboard::class, 'index'])->name('dashboard');
    Route::resource('users', UserController::class);
});

Route::get('/guru/dashboard', [GuruDashboard::class, 'index'])
    ->middleware(['auth', 'checkrole:guru'])->name('guru.dashboard');

Route::get('/siswa/dashboard', [SiswaDashboard::class, 'index'])
    ->middleware(['auth', 'checkrole:siswa'])->name('siswa.dashboard');

Route::get('/dashboard', function () {
    $role = Auth::user()->role->name;
    return match($role) {
        'admin' => redirect()->route('admin.dashboard'),
        'guru' => redirect()->route('guru.dashboard'),
        'siswa' => redirect()->route('siswa.dashboard'),
    };
})->middleware(['auth', 'verified'])->name('dashboard');
```

### 2.8 Jalankan Migration & Seeder
```bash
php artisan migrate:fresh --seed
```

---

## 3. Profile Management

### 3.1 Migration - Tambah Kolom Profile
```bash
php artisan make:migration add_additional_fields_to_users_table --table=users
`````````````````````````````````````````````````````````````````````````````

**Migration:**
```<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::table('users', function (Blueprint $table) {
            // Skip role_id karena sudah ada
            // $table->foreignId('role_id')->nullable()->after('id')->constrained('roles')->onDelete('cascade');

            $table->enum('gender', ['male', 'female'])->nullable()->after('password');
            $table->text('address')->nullable()->after('gender');
            $table->string('birth_place')->nullable()->after('address');
            $table->date('birth_date')->nullable()->after('birth_place');
            $table->string('phone', 15)->nullable()->after('birth_date');
            $table->string('photo')->nullable()->after('phone');
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::table('users', function (Blueprint $table) {
            // Skip role_id karena kita tidak menambahkannya
            // $table->dropForeign(['role_id']);
            $table->dropColumn([
                // 'role_id', // skip ini
                'gender',
                'address',
                'birth_place',
                'birth_date',
                'phone',
                'photo'
            ]);
        });
    }
};

```

```bash
php artisan migrate
php artisan storage:link
```

### 3.2 Update Model User
**Tambahkan ke `$fillable`:**
```<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Foundation\Auth\User as Authenticatable;
use Illuminate\Notifications\Notifiable;

class User extends Authenticatable
{
    use HasFactory, Notifiable;

    /**
     * The attributes that are mass assignable.
     *
     * @var list<string>
     */
    protected $fillable = [
        'name',
        'email',
        'password',
        'role_id',
        'gender',
        'address',
        'birth_place',
        'birth_date',
        'phone',
        'photo',
    ];

    /**
     * The attributes that should be hidden for serialization.
     *
     * @var list<string>
     */
    protected $hidden = [
        'password',
        'remember_token',
    ];

    /**
     * Get the attributes that should be cast.
     *
     * @return array<string, string>
     */
    protected function casts(): array
    {
        return [
            'email_verified_at' => 'datetime',
            'password' => 'hashed',
            'birth_date' => 'date',
        ];
    }

    /**
     * Relationship with Role
     */
    public function role()
    {
        return $this->belongsTo(Role::class);
    }

    /**
     * Check if user is admin
     */
    public function isAdmin()
    {
        return $this->role->name === 'admin';
    }

    /**
     * Check if user is guru
     */
    public function isGuru()
    {
        return $this->role->name === 'guru';
    }

    /**
     * Check if user is siswa
     */
    public function isSiswa()
    {
        return $this->role->name === 'siswa';
    }

    /**
     * Relationship: Guru mengajar banyak Mapel (many-to-many)
     */
    public function mapels()
    {
        return $this->belongsToMany(Mapel::class, 'guru_mapel', 'user_id', 'mapel_id')
                    ->withTimestamps();
    }
}

```

### 3.3 Controller Profile
```bash
php artisan make:controller ProfileController
`````````````````````````````````````````````

<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Facades\Storage;

class ProfileController extends Controller
{
    public function edit()
    {
        $user = Auth::user();
        return view('profile.edit', compact('user'));
    }

    public function update(Request $request)
    {
        $user = Auth::user();

        $validated = $request->validate([
            'name' => 'required|string|max:255',
            'email' => 'required|email|unique:users,email,' . $user->id,
            'gender' => 'nullable|in:male,female',
            'address' => 'nullable|string',
            'birth_place' => 'nullable|string|max:255',
            'birth_date' => 'nullable|date',
            'phone' => 'nullable|string|max:15|regex:/^[0-9]+$/',
            'photo' => 'nullable|image|mimes:jpeg,png,jpg|max:2048',
            'current_password' => 'nullable|required_with:new_password',
            'new_password' => 'nullable|min:8|confirmed',
        ], [
            'phone.regex' => 'Nomor HP hanya boleh berisi angka.',
            'phone.max' => 'Nomor HP maksimal 15 digit.',
        ]);

        // Handle password update
        if ($request->filled('current_password')) {
            if (!Hash::check($request->current_password, $user->password)) {
                return back()->withErrors(['current_password' => 'Password saat ini tidak sesuai']);
            }
            $validated['password'] = Hash::make($request->new_password);
        }

        // Handle photo upload
        if ($request->hasFile('photo')) {
            // Delete old photo if exists
            if ($user->photo) {
                Storage::disk('public')->delete($user->photo);
            }
            $validated['photo'] = $request->file('photo')->store('photos', 'public');
        }

        // Remove password fields that shouldn't be updated
        unset($validated['current_password'], $validated['new_password'], $validated['new_password_confirmation']);

        $user->update($validated);

        return redirect()->route('profile.edit')->with('success', 'Profile berhasil diupdate');
    }
}

profile edit
==============
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">Edit Profile Saya</h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            @if(session('success'))
                <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg mb-6 flex items-center shadow-sm">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span>{{ session('success') }}</span>
                </div>
            @endif

            <div class="bg-white overflow-hidden shadow-lg sm:rounded-lg">
                <div class="p-6 bg-gradient-to-r from-blue-500 to-indigo-600 border-b border-gray-200">
                    <h3 class="text-lg font-semibold text-white">Informasi Profile</h3>
                    <p class="text-sm text-blue-100 mt-1">Kelola informasi pribadi dan keamanan akun Anda</p>
                </div>

                <form action="{{ route('profile.update') }}" method="POST" enctype="multipart/form-data" class="p-6">
                    @csrf @method('PUT')

                    <!-- Photo Section -->
                    <div class="mb-8 flex justify-center">
                        <div class="text-center">
                            <div class="mb-4">
                                @if($user->photo)
                                    <img id="photo-preview" src="{{ asset('storage/' . $user->photo) }}"
                                        class="w-40 h-40 rounded-full object-cover border-4 border-blue-500 shadow-2xl mx-auto">
                                @else
                                    <div id="photo-preview" class="w-40 h-40 rounded-full bg-gradient-to-br from-blue-400 to-indigo-600 flex items-center justify-center text-5xl text-white font-bold shadow-2xl mx-auto border-4 border-blue-500">
                                        {{ strtoupper(substr($user->name, 0, 1)) }}
                                    </div>
                                @endif
                            </div>
                            <label for="photo" class="cursor-pointer inline-flex items-center px-6 py-3 bg-blue-600 border border-transparent rounded-lg font-semibold text-sm text-white uppercase tracking-widest hover:bg-blue-700 transition shadow-md">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                Ganti Foto Profile
                            </label>
                            <input type="file" id="photo" name="photo" accept="image/*" class="hidden">
                            <p class="text-xs text-gray-500 mt-2">JPG, PNG maksimal 2MB</p>
                            @error('photo')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>
                    </div>

                    <!-- Personal Information Section -->
                    <div class="mb-8">
                        <h4 class="text-md font-semibold text-gray-800 mb-4 flex items-center border-b pb-2">
                            <svg class="w-5 h-5 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                            Informasi Pribadi
                        </h4>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Nama -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Nama Lengkap <span class="text-red-500">*</span>
                                </label>
                                <input type="text" name="name" value="{{ old('name', $user->name) }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" required>
                                @error('name')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                            </div>

                            <!-- Email -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Email <span class="text-red-500">*</span>
                                </label>
                                <input type="email" name="email" value="{{ old('email', $user->email) }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" required>
                                @error('email')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                            </div>

                            <!-- Gender -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Kelamin</label>
                                <select name="gender" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                                    <option value="">Pilih Jenis Kelamin</option>
                                    <option value="male" {{ old('gender', $user->gender) == 'male' ? 'selected' : '' }}>Laki-laki</option>
                                    <option value="female" {{ old('gender', $user->gender) == 'female' ? 'selected' : '' }}>Perempuan</option>
                                </select>
                                @error('gender')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                            </div>

                            <!-- Phone -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">No. HP</label>
                                <input type="text" name="phone" value="{{ old('phone', $user->phone) }}"
                                    maxlength="15"
                                    oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 15)"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                                    placeholder="08xxxxxxxxxx">
                                <p class="text-xs text-gray-500 mt-1">Maksimal 15 digit angka</p>
                                @error('phone')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                            </div>

                            <!-- Birth Place -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tempat Lahir</label>
                                <input type="text" name="birth_place" value="{{ old('birth_place', $user->birth_place) }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                                    placeholder="Jakarta">
                                @error('birth_place')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                            </div>

                            <!-- Birth Date -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal Lahir</label>
                                <input type="date" name="birth_date" value="{{ old('birth_date', $user->birth_date?->format('Y-m-d')) }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                                @error('birth_date')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                            </div>
                        </div>

                        <!-- Address -->
                        <div class="mt-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Alamat Lengkap</label>
                            <textarea name="address" rows="3"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                                placeholder="Jl. Contoh No. 123, Kelurahan, Kecamatan, Kota">{{ old('address', $user->address) }}</textarea>
                            @error('address')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>
                    </div>

                    <!-- Security Section -->
                    <div class="mb-8 pt-6 border-t border-gray-200">
                        <h4 class="text-md font-semibold text-gray-800 mb-4 flex items-center">
                            <svg class="w-5 h-5 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                            </svg>
                            Ubah Password (Opsional)
                        </h4>
                        <p class="text-sm text-gray-600 mb-4">Kosongkan jika tidak ingin mengubah password</p>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Password Saat Ini</label>
                                <input type="password" name="current_password"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                                @error('current_password')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Password Baru</label>
                                <input type="password" name="new_password"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                                @error('new_password')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Konfirmasi Password</label>
                                <input type="password" name="new_password_confirmation"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex items-center justify-end space-x-3 pt-6 border-t border-gray-200">
                        <a href="{{ route('dashboard') }}"
                            class="inline-flex items-center px-6 py-2 bg-gray-500 border border-transparent rounded-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-600 transition">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                            Batal
                        </a>
                        <button type="submit"
                            class="inline-flex items-center px-6 py-2 bg-blue-600 border border-transparent rounded-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 transition">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                            Simpan Perubahan
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Preview foto saat dipilih
        document.getElementById('photo').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('photo-preview');
                    preview.src = e.target.result;
                    preview.className = 'w-40 h-40 rounded-full object-cover border-4 border-blue-500 shadow-2xl mx-auto';
                }
                reader.readAsDataURL(file);
            }
        });
    </script>
</x-app-layout>
======================
### 3.4 Update Navigation
**`resources/views/layouts/navigation.blade.php`:**
- Tambah menu "Kelola User", "Kelola Mapel", "Assign Guru" untuk Admin
- Tambah menu "Mata Pelajaran" untuk Guru
<!-- Navigation Links -->
                <div class="hidden space-x-8 sm:-my-px sm:ms-10 sm:flex">
                    <x-nav-link :href="route('dashboard')" :active="request()->routeIs('dashboard')">
                        {{ __('Dashboard') }}
                    </x-nav-link>

                    @if(Auth::user()->isAdmin())
                        <x-nav-link :href="route('admin.users.index')" :active="request()->routeIs('admin.users.*')">
                            {{ __('Kelola User') }}
                        </x-nav-link>

                        <x-nav-link :href="route('admin.mapels.index')" :active="request()->routeIs('admin.mapels.*')">
                            {{ __('Kelola Mapel') }}
                        </x-nav-link>

                        <x-nav-link :href="route('admin.guru-mapel.index')" :active="request()->routeIs('admin.guru-mapel.*')">
                            {{ __('Assign Guru') }}
                        </x-nav-link>
                    @endif

                    @if(Auth::user()->isGuru())
                        <x-nav-link :href="route('guru.mapels.index')" :active="request()->routeIs('guru.mapels.*') || request()->routeIs('guru.nilais.*')">
                            {{ __('Mata Pelajaran') }}
                        </x-nav-link>
                    @endif
                </div>
            </div>

### 3.5 Views Profile & User Management
Buat folder dan views:
```bash
ADMIN
dashboard admin
===============
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Admin Dashboard') }}
        </h2>
    </x-slot>
</x-app-layout>
==============
------------------------------- Users
index.blade.php
===============
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">Kelola Users</h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            @if(session('success'))
                <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4" role="alert">
                    <span class="block sm:inline">{{ session('success') }}</span>
                </div>
            @endif

            <div class="bg-white overflow-hidden shadow-lg sm:rounded-lg">
                <div class="p-6 border-b border-gray-200">
                    <a href="{{ route('admin.users.create') }}" class="inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 active:bg-blue-900 focus:outline-none focus:border-blue-900 focus:ring ring-blue-300 disabled:opacity-25 transition ease-in-out duration-150">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                        </svg>
                        Tambah User
                    </a>
                </div>

                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Foto
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Nama
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Email
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Role
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Aksi
                                </th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            @forelse($users as $user)
                            <tr class="hover:bg-gray-50 transition-colors duration-150">
                                <td class="px-6 py-4 whitespace-nowrap">
                                    @if($user->photo)
                                        <img src="{{ asset('storage/' . $user->photo) }}" alt="{{ $user->name }}" class="w-10 h-10 rounded-full object-cover border-2 border-gray-300">
                                    @else
                                        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-sm border-2 border-gray-300">
                                            {{ strtoupper(substr($user->name, 0, 1)) }}
                                        </div>
                                    @endif
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="text-sm font-medium text-gray-900">{{ $user->name }}</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="text-sm text-gray-500">{{ $user->email }}</div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                                        {{ $user->role->name === 'admin' ? 'bg-purple-100 text-purple-800' : '' }}
                                        {{ $user->role->name === 'guru' ? 'bg-green-100 text-green-800' : '' }}
                                        {{ $user->role->name === 'siswa' ? 'bg-blue-100 text-blue-800' : '' }}
                                    ">
                                        {{ ucfirst($user->role->name) }}
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                    <a href="{{ route('admin.users.show', $user) }}" class="text-blue-600 hover:text-blue-900 mr-3 inline-flex items-center">
                                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                        </svg>
                                        Detail
                                    </a>
                                    <form action="{{ route('admin.users.destroy', $user) }}" method="POST" class="inline">
                                        @csrf @method('DELETE')
                                        <button type="submit" class="text-red-600 hover:text-red-900 inline-flex items-center" onclick="return confirm('Yakin ingin menghapus user ini?')">
                                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                            </svg>
                                            Hapus
                                        </button>
                                    </form>
                                </td>
                            </tr>
                            @empty
                            <tr>
                                <td colspan="5" class="px-6 py-4 text-center text-gray-500">
                                    Belum ada data user
                                </td>
                            </tr>
                            @endforelse
                        </tbody>
                    </table>
                </div>

                @if($users->hasPages())
                <div class="bg-white px-4 py-3 border-t border-gray-200 sm:px-6">
                    {{ $users->links() }}
                </div>
                @endif
            </div>
        </div>
    </div>
</x-app-layout>
===============
edit.blade.php
===============
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">Edit User</h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-lg sm:rounded-lg">
                <div class="p-6 bg-gradient-to-r from-green-500 to-green-600 border-b border-gray-200">
                    <h3 class="text-lg font-semibold text-white">Form Edit User</h3>
                    <p class="text-sm text-green-100 mt-1">Update data user: <strong>{{ $user->name }}</strong></p>
                </div>

                <form action="{{ route('admin.users.update', $user) }}" method="POST" enctype="multipart/form-data" class="p-6">
                    @csrf @method('PUT')

                    <!-- Current Photo Preview -->
                    <div class="mb-6 flex justify-center">
                        <div class="text-center">
                            <div class="mb-3">
                                @if($user->photo)
                                    <img id="photo-preview" src="{{ asset('storage/' . $user->photo) }}" class="w-32 h-32 rounded-full object-cover border-4 border-green-500 shadow-lg mx-auto">
                                @else
                                    <div id="photo-preview" class="w-32 h-32 rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center text-4xl text-white font-bold shadow-lg mx-auto">
                                        {{ strtoupper(substr($user->name, 0, 1)) }}
                                    </div>
                                @endif
                            </div>
                            <label for="photo" class="cursor-pointer inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 transition">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                                </svg>
                                Ubah Foto
                            </label>
                            <input type="file" id="photo" name="photo" accept="image/*" class="hidden">
                            <p class="text-xs text-gray-500 mt-2">JPG, PNG maksimal 2MB (kosongkan jika tidak diubah)</p>
                            @error('photo')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Nama -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Nama Lengkap <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="name" value="{{ old('name', $user->name) }}"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition" required>
                            @error('name')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>

                        <!-- Email -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Email <span class="text-red-500">*</span>
                            </label>
                            <input type="email" name="email" value="{{ old('email', $user->email) }}"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition" required>
                            @error('email')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>

                        <!-- Password -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Password <span class="text-gray-400">(kosongkan jika tidak diubah)</span>
                            </label>
                            <input type="password" name="password"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition"
                                placeholder="Minimal 8 karakter">
                            @error('password')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>

                        <!-- Role -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Role <span class="text-red-500">*</span>
                            </label>
                            <select name="role_id" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition" required>
                                @foreach($roles as $role)
                                    <option value="{{ $role->id }}" {{ old('role_id', $user->role_id) == $role->id ? 'selected' : '' }}>
                                        {{ ucfirst($role->name) }}
                                    </option>
                                @endforeach
                            </select>
                            @error('role_id')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>

                        <!-- Gender -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Kelamin</label>
                            <select name="gender" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition">
                                <option value="">Pilih Jenis Kelamin</option>
                                <option value="male" {{ old('gender', $user->gender) == 'male' ? 'selected' : '' }}>Laki-laki</option>
                                <option value="female" {{ old('gender', $user->gender) == 'female' ? 'selected' : '' }}>Perempuan</option>
                            </select>
                            @error('gender')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>

                        <!-- Phone -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">No. HP</label>
                            <input type="text" name="phone" value="{{ old('phone', $user->phone) }}"
                                maxlength="15"
                                oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 15)"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition"
                                placeholder="08xxxxxxxxxx">
                            <p class="text-xs text-gray-500 mt-1">Maksimal 15 digit angka</p>
                            @error('phone')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>

                        <!-- Birth Place -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tempat Lahir</label>
                            <input type="text" name="birth_place" value="{{ old('birth_place', $user->birth_place) }}"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition"
                                placeholder="Jakarta">
                            @error('birth_place')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>

                        <!-- Birth Date -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal Lahir</label>
                            <input type="date" name="birth_date" value="{{ old('birth_date', $user->birth_date?->format('Y-m-d')) }}"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition">
                            @error('birth_date')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>
                    </div>

                    <!-- Address -->
                    <div class="mt-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Alamat</label>
                        <textarea name="address" rows="3"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition"
                            placeholder="Jl. Contoh No. 123, Kelurahan, Kecamatan, Kota">{{ old('address', $user->address) }}</textarea>
                        @error('address')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                    </div>

                    <!-- Buttons -->
                    <div class="flex items-center justify-end space-x-3 mt-8 pt-6 border-t border-gray-200">
                        <a href="{{ route('admin.users.index') }}"
                            class="inline-flex items-center px-6 py-2 bg-gray-500 border border-transparent rounded-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-600 transition">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                            Batal
                        </a>
                        <button type="submit"
                            class="inline-flex items-center px-6 py-2 bg-green-600 border border-transparent rounded-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 transition">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                            Update User
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Preview foto saat dipilih
        document.getElementById('photo').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('photo-preview');
                    preview.src = e.target.result;
                    preview.className = 'w-32 h-32 rounded-full object-cover border-4 border-green-500 shadow-lg mx-auto';
                }
                reader.readAsDataURL(file);
            }
        });
    </script>
</x-app-layout>
================
create.blade.php
================
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">Tambah User Baru</h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-lg sm:rounded-lg">
                <div class="p-6 bg-gradient-to-r from-blue-500 to-blue-600 border-b border-gray-200">
                    <h3 class="text-lg font-semibold text-white">Form Tambah User</h3>
                    <p class="text-sm text-blue-100 mt-1">Lengkapi data user baru di bawah ini</p>
                </div>

                <form action="{{ route('admin.users.store') }}" method="POST" enctype="multipart/form-data" class="p-6">
                    @csrf

                    <!-- Photo Upload -->
                    <div class="mb-6 flex justify-center">
                        <div class="text-center">
                            <div class="mb-3">
                                <div id="preview-container" class="hidden">
                                    <img id="photo-preview" class="w-32 h-32 rounded-full object-cover border-4 border-blue-500 shadow-lg mx-auto">
                                </div>
                                <div id="placeholder-avatar" class="w-32 h-32 rounded-full bg-gradient-to-br from-gray-300 to-gray-400 flex items-center justify-center text-4xl text-white font-bold shadow-lg mx-auto">
                                    <svg class="w-16 h-16 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                    </svg>
                                </div>
                            </div>
                            <label for="photo" class="cursor-pointer inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 transition">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                Upload Foto
                            </label>
                            <input type="file" id="photo" name="photo" accept="image/*" class="hidden">
                            <p class="text-xs text-gray-500 mt-2">JPG, PNG maksimal 2MB</p>
                            @error('photo')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Nama -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Nama Lengkap <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="name" value="{{ old('name') }}"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                                placeholder="Masukkan nama lengkap" required>
                            @error('name')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>

                        <!-- Email -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Email <span class="text-red-500">*</span>
                            </label>
                            <input type="email" name="email" value="{{ old('email') }}"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                                placeholder="nama@example.com" required>
                            @error('email')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>

                        <!-- Password -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Password <span class="text-red-500">*</span>
                            </label>
                            <input type="password" name="password"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                                placeholder="Minimal 8 karakter" required>
                            @error('password')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>

                        <!-- Role -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Role <span class="text-red-500">*</span>
                            </label>
                            <select name="role_id" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" required>
                                <option value="">Pilih Role</option>
                                @foreach($roles as $role)
                                    <option value="{{ $role->id }}" {{ old('role_id') == $role->id ? 'selected' : '' }}>
                                        {{ ucfirst($role->name) }}
                                    </option>
                                @endforeach
                            </select>
                            @error('role_id')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>

                        <!-- Gender -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Kelamin</label>
                            <select name="gender" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                                <option value="">Pilih Jenis Kelamin</option>
                                <option value="male" {{ old('gender') == 'male' ? 'selected' : '' }}>Laki-laki</option>
                                <option value="female" {{ old('gender') == 'female' ? 'selected' : '' }}>Perempuan</option>
                            </select>
                            @error('gender')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>

                        <!-- Phone -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">No. HP</label>
                            <input type="text" name="phone" value="{{ old('phone') }}"
                                maxlength="15"
                                oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 15)"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                                placeholder="08xxxxxxxxxx">
                            <p class="text-xs text-gray-500 mt-1">Maksimal 15 digit angka</p>
                            @error('phone')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>

                        <!-- Birth Place -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tempat Lahir</label>
                            <input type="text" name="birth_place" value="{{ old('birth_place') }}"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                                placeholder="Jakarta">
                            @error('birth_place')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>

                        <!-- Birth Date -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal Lahir</label>
                            <input type="date" name="birth_date" value="{{ old('birth_date') }}"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                            @error('birth_date')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                        </div>
                    </div>

                    <!-- Address -->
                    <div class="mt-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Alamat</label>
                        <textarea name="address" rows="3"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                            placeholder="Jl. Contoh No. 123, Kelurahan, Kecamatan, Kota">{{ old('address') }}</textarea>
                        @error('address')<p class="text-red-500 text-sm mt-1">{{ $message }}</p>@enderror
                    </div>

                    <!-- Buttons -->
                    <div class="flex items-center justify-end space-x-3 mt-8 pt-6 border-t border-gray-200">
                        <a href="{{ route('admin.users.index') }}"
                            class="inline-flex items-center px-6 py-2 bg-gray-500 border border-transparent rounded-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-600 transition">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                            Batal
                        </a>
                        <button type="submit"
                            class="inline-flex items-center px-6 py-2 bg-blue-600 border border-transparent rounded-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 transition">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                            Simpan User
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Preview foto saat dipilih
        document.getElementById('photo').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('photo-preview').src = e.target.result;
                    document.getElementById('preview-container').classList.remove('hidden');
                    document.getElementById('placeholder-avatar').classList.add('hidden');
                }
                reader.readAsDataURL(file);
            }
        });
    </script>
</x-app-layout>
================
show.blade.php
===============
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">Detail User</h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-5xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-lg sm:rounded-lg">
                <!-- Header Section -->
                <div class="bg-gradient-to-r from-indigo-500 to-purple-600 p-8">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-6">
                            @if($user->photo)
                                <img src="{{ asset('storage/' . $user->photo) }}" alt="{{ $user->name }}"
                                    class="w-28 h-28 rounded-full object-cover border-4 border-white shadow-xl">
                            @else
                                <div class="w-28 h-28 rounded-full bg-white flex items-center justify-center text-4xl text-indigo-600 font-bold shadow-xl border-4 border-white">
                                    {{ strtoupper(substr($user->name, 0, 1)) }}
                                </div>
                            @endif
                            <div>
                                <h3 class="text-3xl font-bold text-white">{{ $user->name }}</h3>
                                <p class="text-indigo-100 mt-1 flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                    </svg>
                                    {{ $user->email }}
                                </p>
                                <div class="mt-3">
                                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold
                                        {{ $user->role->name === 'admin' ? 'bg-purple-200 text-purple-800' : '' }}
                                        {{ $user->role->name === 'guru' ? 'bg-green-200 text-green-800' : '' }}
                                        {{ $user->role->name === 'siswa' ? 'bg-blue-200 text-blue-800' : '' }}
                                    ">
                                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                        {{ ucfirst($user->role->name) }}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="text-right">
                            <a href="{{ route('admin.users.edit', $user) }}"
                                class="inline-flex items-center px-6 py-3 bg-white text-indigo-600 rounded-lg font-semibold text-sm hover:bg-indigo-50 transition shadow-lg">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                                Edit User
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Content Section -->
                <div class="p-8">
                    <h4 class="text-lg font-semibold text-gray-800 mb-6 flex items-center">
                        <svg class="w-5 h-5 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Informasi Lengkap
                    </h4>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- ID -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">ID User</label>
                            <p class="text-gray-900 font-medium">#{{ $user->id }}</p>
                        </div>

                        <!-- Nama -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Nama Lengkap</label>
                            <p class="text-gray-900 font-medium">{{ $user->name }}</p>
                        </div>

                        <!-- Email -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Email</label>
                            <p class="text-gray-900 font-medium">{{ $user->email }}</p>
                        </div>

                        <!-- Role -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Role</label>
                            <p class="text-gray-900 font-medium">{{ ucfirst($user->role->name) }}</p>
                        </div>

                        <!-- Gender -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Jenis Kelamin</label>
                            <p class="text-gray-900 font-medium">
                                {{ $user->gender ? ($user->gender === 'male' ? 'Laki-laki' : 'Perempuan') : '-' }}
                            </p>
                        </div>

                        <!-- Phone -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">No. HP</label>
                            <p class="text-gray-900 font-medium">{{ $user->phone ?? '-' }}</p>
                        </div>

                        <!-- Birth Place -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Tempat Lahir</label>
                            <p class="text-gray-900 font-medium">{{ $user->birth_place ?? '-' }}</p>
                        </div>

                        <!-- Birth Date -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Tanggal Lahir</label>
                            <p class="text-gray-900 font-medium">{{ $user->birth_date ? $user->birth_date->format('d F Y') : '-' }}</p>
                        </div>

                        <!-- Created At -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Dibuat Pada</label>
                            <p class="text-gray-900 font-medium">{{ $user->created_at->format('d F Y, H:i') }}</p>
                        </div>

                        <!-- Updated At -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Terakhir Diubah</label>
                            <p class="text-gray-900 font-medium">{{ $user->updated_at->format('d F Y, H:i') }}</p>
                        </div>
                    </div>

                    <!-- Address (Full Width) -->
                    @if($user->address)
                    <div class="mt-6 bg-gray-50 p-4 rounded-lg border border-gray-200">
                        <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Alamat Lengkap</label>
                        <p class="text-gray-900 font-medium leading-relaxed">{{ $user->address }}</p>
                    </div>
                    @endif
                </div>

                <!-- Footer Actions -->
                <div class="bg-gray-50 px-8 py-4 border-t border-gray-200 flex justify-between items-center">
                    <a href="{{ route('admin.users.index') }}"
                        class="inline-flex items-center px-4 py-2 bg-gray-500 border border-transparent rounded-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-600 transition">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                        Kembali
                    </a>
                    <div class="text-sm text-gray-500">
                        ID: <span class="font-semibold text-gray-700">#{{ $user->id }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>
---------------------------------------mapels
index.blade.php
===============
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">Kelola Mata Pelajaran</h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            @if(session('success'))
                <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg mb-6 flex items-center shadow-sm">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span>{{ session('success') }}</span>
                </div>
            @endif

            <div class="bg-white overflow-hidden shadow-lg sm:rounded-lg">
                <div class="p-6 border-b border-gray-200">
                    <button onclick="openCreateModal()" class="inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 active:bg-blue-900 focus:outline-none focus:border-blue-900 focus:ring ring-blue-300 disabled:opacity-25 transition ease-in-out duration-150">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                        </svg>
                        Tambah Mata Pelajaran
                    </button>
                </div>

                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    ID
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Nama Mata Pelajaran
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Durasi
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Jumlah Guru
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Aksi
                                </th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            @forelse($mapels as $mapel)
                            <tr class="hover:bg-gray-50 transition-colors duration-150">
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                    #{{ $mapel->id }}
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-10 w-10 bg-gradient-to-br from-purple-400 to-indigo-600 rounded-lg flex items-center justify-center">
                                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                            </svg>
                                        </div>
                                        <div class="ml-4">
                                            <div class="text-sm font-medium text-gray-900">{{ $mapel->nama_mapel }}</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">
                                        {{ $mapel->durasi }} Jam
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    <span class="inline-flex items-center">
                                        <svg class="w-4 h-4 mr-1 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                        </svg>
                                        {{ $mapel->gurus_count }} Guru
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                    <button onclick='openEditModal(@json($mapel))' class="text-indigo-600 hover:text-indigo-900 mr-3 inline-flex items-center">
                                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                        </svg>
                                        Edit
                                    </button>
                                    <form action="{{ route('admin.mapels.destroy', $mapel) }}" method="POST" class="inline">
                                        @csrf @method('DELETE')
                                        <button type="submit" class="text-red-600 hover:text-red-900 inline-flex items-center" onclick="return confirm('Yakin ingin menghapus mapel ini?')">
                                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                            </svg>
                                            Hapus
                                        </button>
                                    </form>
                                </td>
                            </tr>
                            @empty
                            <tr>
                                <td colspan="5" class="px-6 py-4 text-center text-gray-500">
                                    Belum ada data mata pelajaran
                                </td>
                            </tr>
                            @endforelse
                        </tbody>
                    </table>
                </div>

                @if($mapels->hasPages())
                <div class="bg-white px-4 py-3 border-t border-gray-200 sm:px-6">
                    {{ $mapels->links() }}
                </div>
                @endif
            </div>
        </div>
    </div>

    <!-- Modal Create -->
    <div id="createModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-lg bg-white">
            <div class="flex justify-between items-center pb-3 border-b">
                <h3 class="text-lg font-semibold text-gray-900">Tambah Mata Pelajaran</h3>
                <button onclick="closeCreateModal()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <form action="{{ route('admin.mapels.store') }}" method="POST" class="mt-4">
                @csrf
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Nama Mata Pelajaran <span class="text-red-500">*</span>
                    </label>
                    <input type="text" name="nama_mapel" value="{{ old('nama_mapel') }}" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        placeholder="Contoh: Matematika">
                    @error('nama_mapel')
                        <p class="text-red-500 text-sm mt-1">{{ $message }}</p>
                    @enderror
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Durasi <span class="text-red-500">*</span>
                    </label>
                    <select name="durasi" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="">Pilih Durasi</option>
                        <option value="1" {{ old('durasi') == 1 ? 'selected' : '' }}>1 Jam</option>
                        <option value="2" {{ old('durasi') == 2 ? 'selected' : '' }}>2 Jam</option>
                        <option value="3" {{ old('durasi') == 3 ? 'selected' : '' }}>3 Jam</option>
                        <option value="4" {{ old('durasi') == 4 ? 'selected' : '' }}>4 Jam</option>
                        <option value="5" {{ old('durasi') == 5 ? 'selected' : '' }}>5 Jam</option>
                        <option value="6" {{ old('durasi') == 6 ? 'selected' : '' }}>6 Jam</option>
                        <option value="7" {{ old('durasi') == 7 ? 'selected' : '' }}>7 Jam</option>
                        <option value="8" {{ old('durasi') == 8 ? 'selected' : '' }}>8 Jam</option>
                    </select>
                    @error('durasi')
                        <p class="text-red-500 text-sm mt-1">{{ $message }}</p>
                    @enderror
                </div>
                <div class="flex justify-end space-x-2 pt-4 border-t">
                    <button type="button" onclick="closeCreateModal()"
                        class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition">
                        Batal
                    </button>
                    <button type="submit"
                        class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                        Simpan
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Edit -->
    <div id="editModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-lg bg-white">
            <div class="flex justify-between items-center pb-3 border-b">
                <h3 class="text-lg font-semibold text-gray-900">Edit Mata Pelajaran</h3>
                <button onclick="closeEditModal()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <form id="editForm" method="POST" class="mt-4">
                @csrf @method('PUT')
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Nama Mata Pelajaran <span class="text-red-500">*</span>
                    </label>
                    <input type="text" id="edit_nama_mapel" name="nama_mapel" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    @error('nama_mapel')
                        <p class="text-red-500 text-sm mt-1">{{ $message }}</p>
                    @enderror
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Durasi <span class="text-red-500">*</span>
                    </label>
                    <select id="edit_durasi" name="durasi" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="">Pilih Durasi</option>
                        <option value="1">1 Jam</option>
                        <option value="2">2 Jam</option>
                        <option value="3">3 Jam</option>
                        <option value="4">4 Jam</option>
                        <option value="5">5 Jam</option>
                        <option value="6">6 Jam</option>
                        <option value="7">7 Jam</option>
                        <option value="8">8 Jam</option>
                    </select>
                    @error('durasi')
                        <p class="text-red-500 text-sm mt-1">{{ $message }}</p>
                    @enderror
                </div>
                <div class="flex justify-end space-x-2 pt-4 border-t">
                    <button type="button" onclick="closeEditModal()"
                        class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition">
                        Batal
                    </button>
                    <button type="submit"
                        class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                        Update
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Auto open modal if validation error exists
        @if($errors->any())
            @if(old('_method') === 'PUT')
                // This was an edit form submission
                document.getElementById('editModal').classList.remove('hidden');
            @else
                // This was a create form submission
                document.getElementById('createModal').classList.remove('hidden');
            @endif
        @endif

        function openCreateModal() {
            document.getElementById('createModal').classList.remove('hidden');
        }

        function closeCreateModal() {
            document.getElementById('createModal').classList.add('hidden');
        }

        function openEditModal(mapel) {
            document.getElementById('editForm').action = `/admin/mapels/${mapel.id}`;
            document.getElementById('edit_nama_mapel').value = mapel.nama_mapel;
            document.getElementById('edit_durasi').value = mapel.durasi;
            document.getElementById('editModal').classList.remove('hidden');
        }

        function closeEditModal() {
            document.getElementById('editModal').classList.add('hidden');
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const createModal = document.getElementById('createModal');
            const editModal = document.getElementById('editModal');
            if (event.target == createModal) {
                closeCreateModal();
            }
            if (event.target == editModal) {
                closeEditModal();
            }
        }
    </script>
</x-app-layout>
----------------------------------------guru-mapel
index.blade.php
=================
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">Assign Guru ke Mapel</h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            @if(session('success'))
                <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg mb-6 flex items-center shadow-sm">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span>{{ session('success') }}</span>
                </div>
            @endif

            <div class="bg-white overflow-hidden shadow-lg sm:rounded-lg">
                <div class="p-6 bg-gradient-to-r from-green-500 to-teal-600 border-b border-gray-200">
                    <h3 class="text-lg font-semibold text-white">Kelola Pengampu Mata Pelajaran</h3>
                    <p class="text-sm text-green-100 mt-1">Klik checkbox untuk assign/unassign guru ke mata pelajaran (auto-save)</p>
                </div>

                <div class="p-6 overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky left-0 bg-gray-50 z-10">
                                    ID
                                </th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky left-12 bg-gray-50 z-10">
                                    Nama Guru
                                </th>
                                @foreach($mapels as $mapel)
                                <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    <div class="flex flex-col items-center">
                                        <svg class="w-5 h-5 text-indigo-600 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                        </svg>
                                        <span>{{ $mapel->nama_mapel }}</span>
                                        <span class="text-xs text-gray-400 mt-1">({{ $mapel->durasi }} Jam)</span>
                                    </div>
                                </th>
                                @endforeach
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            @forelse($gurus as $guru)
                            <tr class="hover:bg-gray-50 transition-colors">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-white">
                                    #{{ $guru->id }}
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap sticky left-12 bg-white">
                                    <div class="flex items-center">
                                        @if($guru->photo)
                                            <img src="{{ asset('storage/' . $guru->photo) }}" class="w-10 h-10 rounded-full object-cover border-2 border-green-500">
                                        @else
                                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-green-400 to-teal-600 flex items-center justify-center text-white font-bold">
                                                {{ strtoupper(substr($guru->name, 0, 1)) }}
                                            </div>
                                        @endif
                                        <div class="ml-3">
                                            <div class="text-sm font-medium text-gray-900">{{ $guru->name }}</div>
                                            <div class="text-sm text-gray-500">{{ $guru->email }}</div>
                                        </div>
                                    </div>
                                </td>
                                @foreach($mapels as $mapel)
                                <td class="px-6 py-4 whitespace-nowrap text-center">
                                    <div class="flex items-center justify-center">
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input
                                                type="checkbox"
                                                class="sr-only peer mapel-checkbox"
                                                data-guru-id="{{ $guru->id }}"
                                                data-mapel-id="{{ $mapel->id }}"
                                                {{ $guru->mapels->contains($mapel->id) ? 'checked' : '' }}
                                                onchange="toggleMapel(this)">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                        </label>
                                    </div>
                                </td>
                                @endforeach
                            </tr>
                            @empty
                            <tr>
                                <td colspan="{{ count($mapels) + 2 }}" class="px-6 py-8 text-center text-gray-500">
                                    <div class="flex flex-col items-center">
                                        <svg class="w-12 h-12 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                                        </svg>
                                        <p class="font-medium">Belum ada data guru</p>
                                    </div>
                                </td>
                            </tr>
                            @endforelse
                        </tbody>
                    </table>
                </div>

                <!-- Summary Footer -->
                @if($gurus->count() > 0)
                <div class="px-6 py-4 bg-gray-50 border-t border-gray-200">
                    <div class="flex items-center justify-between text-sm text-gray-600">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Total {{ $gurus->count() }} Guru
                        </div>
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                            </svg>
                            Total {{ $mapels->count() }} Mata Pelajaran
                        </div>
                    </div>
                </div>
                @endif
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg p-6 shadow-xl">
            <div class="flex items-center">
                <svg class="animate-spin h-8 w-8 text-green-600 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <span class="text-gray-700 font-medium">Menyimpan...</span>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="hidden fixed bottom-4 right-4 bg-white border-l-4 border-green-500 rounded-lg shadow-lg p-4 z-50 transform transition-all duration-300">
        <div class="flex items-center">
            <svg class="w-6 h-6 text-green-500 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <div>
                <p class="font-medium text-gray-900" id="toastTitle">Berhasil!</p>
                <p class="text-sm text-gray-600" id="toastMessage">Mapel berhasil diupdate</p>
            </div>
        </div>
    </div>

    <script>
        function toggleMapel(checkbox) {
            const guruId = checkbox.dataset.guruId;
            const mapelId = checkbox.dataset.mapelId;
            const isAssigned = checkbox.checked;

            // Show loading
            document.getElementById('loadingOverlay').classList.remove('hidden');

            // Send AJAX request
            fetch('{{ route("admin.guru-mapel.toggle") }}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRF-TOKEN': '{{ csrf_token() }}'
                },
                body: JSON.stringify({
                    guru_id: guruId,
                    mapel_id: mapelId,
                    is_assigned: isAssigned
                })
            })
            .then(response => response.json())
            .then(data => {
                // Hide loading
                document.getElementById('loadingOverlay').classList.add('hidden');

                if (data.success) {
                    // Show success toast
                    showToast('Berhasil!', data.message);
                } else {
                    // Revert checkbox if failed
                    checkbox.checked = !isAssigned;
                    showToast('Gagal!', 'Terjadi kesalahan, silakan coba lagi', true);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                // Hide loading
                document.getElementById('loadingOverlay').classList.add('hidden');
                // Revert checkbox
                checkbox.checked = !isAssigned;
                showToast('Error!', 'Terjadi kesalahan koneksi', true);
            });
        }

        function showToast(title, message, isError = false) {
            const toast = document.getElementById('toast');
            const toastTitle = document.getElementById('toastTitle');
            const toastMessage = document.getElementById('toastMessage');

            toastTitle.textContent = title;
            toastMessage.textContent = message;

            // Change color for error
            if (isError) {
                toast.classList.remove('border-green-500');
                toast.classList.add('border-red-500');
                toast.querySelector('svg').classList.remove('text-green-500');
                toast.querySelector('svg').classList.add('text-red-500');
            } else {
                toast.classList.remove('border-red-500');
                toast.classList.add('border-green-500');
                toast.querySelector('svg').classList.remove('text-red-500');
                toast.querySelector('svg').classList.add('text-green-500');
            }

            // Show toast
            toast.classList.remove('hidden');

            // Hide after 3 seconds
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        }
    </script>
</x-app-layout>
=================
GURU
dashboard guru 
==============
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">Guru Dashboard</h2>
    </x-slot>
    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-6 text-gray-900">Dashboard Guru</div>
            </div>
        </div>
    </div>
</x-app-layout>
============
--------------------------------mapels
index.blade.php
=================
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">Mata Pelajaran Saya</h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            @if($mapels->isEmpty())
                <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                            </svg>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm text-yellow-700">
                                Anda belum di-assign ke mata pelajaran apapun. Silakan hubungi admin.
                            </p>
                        </div>
                    </div>
                </div>
            @else
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    @foreach($mapels as $mapel)
                    <div class="bg-white overflow-hidden shadow-lg rounded-lg hover:shadow-xl transition-shadow duration-300">
                        <div class="bg-gradient-to-br from-purple-500 to-indigo-600 p-6">
                            <div class="flex items-center justify-center mb-4">
                                <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center">
                                    <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                    </svg>
                                </div>
                            </div>
                            <h3 class="text-center text-white text-xl font-bold">{{ $mapel->nama_mapel }}</h3>
                        </div>
                        <div class="p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center text-gray-600">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    <span class="text-sm font-medium">{{ $mapel->durasi }} Jam</span>
                                </div>
                                <div class="flex items-center text-gray-600">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                    </svg>
                                    <span class="text-sm font-medium">{{ $mapel->nilais_count }} Nilai</span>
                                </div>
                            </div>
                            <a href="{{ route('guru.nilais.index', $mapel) }}"
                                class="block w-full text-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium">
                                Kelola Nilai
                            </a>
                        </div>
                    </div>
                    @endforeach
                </div>
            @endif
        </div>
    </div>
</x-app-layout>
==================
---------------------------------nilais
index.blade.php
=================
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            Kelola Nilai - {{ $mapel->nama_mapel }}
        </h2>
    </x-slot>
<style>
.select2-container--default .select2-selection--single {
    border: 1px solid #d1d5db !important;
    border-radius: 0.5rem !important;
    height: 42px !important;
    padding: 6px 12px !important;
}

.select2-container--default .select2-selection--single .select2-selection__rendered {
    line-height: 28px !important;
}

.select2-container--default .select2-selection--single .select2-selection__arrow {
    height: 40px !important;
}
</style></style>
    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            @if(session('success'))
                <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg mb-6 flex items-center shadow-sm">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span>{{ session('success') }}</span>
                </div>
            @endif

            <!-- Mapel Info Card -->
            <div class="bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg shadow-lg p-6 mb-6">
                <div class="flex items-center justify-between text-white">
                    <div>
                        <h3 class="text-2xl font-bold">{{ $mapel->nama_mapel }}</h3>
                        <p class="text-purple-100 mt-1">Durasi: {{ $mapel->durasi }} Jam per Pertemuan</p>
                    </div>
                    <div class="text-right">
                        <div class="text-3xl font-bold">{{ $nilais->total() }}</div>
                        <div class="text-sm text-purple-100">Total Nilai</div>
                    </div>
                </div>
            </div>

            <div class="bg-white overflow-hidden shadow-lg sm:rounded-lg">
                <div class="p-6 border-b border-gray-200 flex justify-between items-center">
                    <div>
                        <h4 class="text-lg font-semibold text-gray-900">Daftar Nilai</h4>
                        <p class="text-sm text-gray-500 mt-1">Kelola nilai siswa untuk mata pelajaran ini</p>
                    </div>
                    <button onclick="openCreateModal()" class="inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 transition">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                        </svg>
                        Tambah Nilai
                    </button>
                </div>

                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">No</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nama Siswa</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tanggal</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Keterangan</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nilai</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Durasi</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            @forelse($nilais as $index => $nilai)
                            <tr class="hover:bg-gray-50 transition-colors duration-150">
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                    {{ $nilais->firstItem() + $index }}
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        @if($nilai->siswa->photo)
                                            <img src="{{ asset('storage/' . $nilai->siswa->photo) }}" class="w-8 h-8 rounded-full object-cover mr-3">
                                        @else
                                            <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-indigo-600 flex items-center justify-center text-white text-xs font-bold mr-3">
                                                {{ strtoupper(substr($nilai->siswa->name, 0, 1)) }}
                                            </div>
                                        @endif
                                        <span class="text-sm font-medium text-gray-900">{{ $nilai->siswa->name }}</span>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    {{ $nilai->tanggal->format('d/m/Y') }}
                                </td>
                                <td class="px-6 py-4 text-sm text-gray-900">
                                    {{ $nilai->keterangan }}
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full
                                        {{ $nilai->nilai >= 75 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800' }}">
                                        {{ $nilai->nilai }}
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    {{ $mapel->durasi }} Jam
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                    <button onclick='openEditModal(@json($nilai))' class="text-indigo-600 hover:text-indigo-900 mr-3">
                                        <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                        </svg>
                                        Edit
                                    </button>
                                    <form action="{{ route('guru.nilais.destroy', [$mapel, $nilai]) }}" method="POST" class="inline">
                                        @csrf @method('DELETE')
                                        <button type="submit" class="text-red-600 hover:text-red-900" onclick="return confirm('Yakin ingin menghapus nilai ini?')">
                                            <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                            </svg>
                                            Hapus
                                        </button>
                                    </form>
                                </td>
                            </tr>
                            @empty
                            <tr>
                                <td colspan="7" class="px-6 py-4 text-center text-gray-500">
                                    Belum ada data nilai
                                </td>
                            </tr>
                            @endforelse
                        </tbody>
                    </table>
                </div>

                @if($nilais->hasPages())
                <div class="bg-white px-4 py-3 border-t border-gray-200 sm:px-6">
                    {{ $nilais->links() }}
                </div>
                @endif
            </div>

            <div class="mt-4">
                <a href="{{ route('guru.mapels.index') }}" class="inline-flex items-center px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Kembali ke Daftar Mapel
                </a>
            </div>
        </div>
    </div>

    <!-- Modal Create -->
    <div id="createModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-full max-w-lg shadow-lg rounded-lg bg-white">
            <div class="flex justify-between items-center pb-3 border-b">
                <h3 class="text-lg font-semibold text-gray-900">Tambah Nilai</h3>
                <button onclick="closeCreateModal()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <form action="{{ route('guru.nilais.store', $mapel) }}" method="POST" class="mt-4">
                @csrf
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Siswa <span class="text-red-500">*</span></label>
                    <select name="siswa_id" id="siswa_id_create" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        <option value="">Ketik atau pilih siswa...</option>
                        @foreach($siswas as $siswa)
                            <option value="{{ $siswa->id }}">{{ $siswa->name }} - {{ $siswa->email }}</option>
                        @endforeach
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal <span class="text-red-500">*</span></label>
                    <input type="date" name="tanggal" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Keterangan/Nama Tugas <span class="text-red-500">*</span></label>
                    <input type="text" name="keterangan" required placeholder="Contoh: UTS, Tugas Kelompok, Quiz 1" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nilai (0-100) <span class="text-red-500">*</span></label>
                    <input type="number" name="nilai" required min="0" max="100" maxlength="3" oninput="if(this.value.length > 3) this.value = this.value.slice(0,3); if(this.value > 100) this.value = 100;" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" placeholder="0-100">
                </div>
                <div class="flex justify-end space-x-2 pt-4 border-t">
                    <button type="button" onclick="closeCreateModal()" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition">Batal</button>
                    <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">Simpan</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Edit -->
    <div id="editModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-full max-w-lg shadow-lg rounded-lg bg-white">
            <div class="flex justify-between items-center pb-3 border-b">
                <h3 class="text-lg font-semibold text-gray-900">Edit Nilai</h3>
                <button onclick="closeEditModal()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <form id="editForm" method="POST" class="mt-4">
                @csrf @method('PUT')
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Siswa <span class="text-red-500">*</span></label>
                    <select id="edit_siswa_id" name="siswa_id" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        @foreach($siswas as $siswa)
                            <option value="{{ $siswa->id }}">{{ $siswa->name }} - {{ $siswa->email }}</option>
                        @endforeach
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal <span class="text-red-500">*</span></label>
                    <input type="date" id="edit_tanggal" name="tanggal" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Keterangan/Nama Tugas <span class="text-red-500">*</span></label>
                    <input type="text" id="edit_keterangan" name="keterangan" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nilai (0-100) <span class="text-red-500">*</span></label>
                    <input type="number" id="edit_nilai" name="nilai" required min="0" max="100" maxlength="3" oninput="if(this.value.length > 3) this.value = this.value.slice(0,3); if(this.value > 100) this.value = 100;" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                </div>
                <div class="flex justify-end space-x-2 pt-4 border-t">
                    <button type="button" onclick="closeEditModal()" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition">Batal</button>
                    <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">Update</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Select2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <!-- Select2 JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <script>
        // Initialize Select2 for Create Modal
        function initializeSelect2Create() {
            $('#siswa_id_create').select2({
                dropdownParent: $('#createModal'),
                placeholder: 'Ketik nama atau email siswa...',
                allowClear: true,
                width: '100%'
            });
        }

        // Initialize Select2 for Edit Modal
        function initializeSelect2Edit() {
            $('#edit_siswa_id').select2({
                dropdownParent: $('#editModal'),
                placeholder: 'Ketik nama atau email siswa...',
                allowClear: true,
                width: '100%'
            });
        }

        function openCreateModal() {
            document.getElementById('createModal').classList.remove('hidden');
            // Initialize Select2 after modal is shown
            setTimeout(initializeSelect2Create, 100);
        }

        function closeCreateModal() {
            // Destroy Select2 before closing
            $('#siswa_id_create').select2('destroy');
            document.getElementById('createModal').classList.add('hidden');
        }

        function openEditModal(nilai) {
            document.getElementById('editForm').action = `/guru/mapels/{{ $mapel->id }}/nilais/${nilai.id}`;
            document.getElementById('edit_tanggal').value = nilai.tanggal.split('T')[0];
            document.getElementById('edit_keterangan').value = nilai.keterangan;
            document.getElementById('edit_nilai').value = nilai.nilai;
            document.getElementById('editModal').classList.remove('hidden');

            // Initialize Select2 and set value after modal is shown
            setTimeout(function() {
                initializeSelect2Edit();
                $('#edit_siswa_id').val(nilai.siswa_id).trigger('change');
            }, 100);
        }

        function closeEditModal() {
            // Destroy Select2 before closing
            $('#edit_siswa_id').select2('destroy');
            document.getElementById('editModal').classList.add('hidden');
        }

        window.onclick = function(event) {
            const createModal = document.getElementById('createModal');
            const editModal = document.getElementById('editModal');
            if (event.target == createModal) closeCreateModal();
            if (event.target == editModal) closeEditModal();
        }
    </script>
</x-app-layout>
===============
SISWA 
dashboard,blade.php
<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">Dashboard Siswa</h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6">

            <!-- Welcome Section -->
            <div class="bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg shadow-lg p-6 text-white">
                <h3 class="text-2xl font-bold">Selamat Datang, {{ Auth::user()->name }}! ðŸ‘‹</h3>
                <p class="mt-2 text-blue-100">Berikut adalah ringkasan nilai dan prestasi Anda</p>
            </div>

            <!-- Overall Statistics Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <!-- Total Nilai -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600 font-medium">Total Nilai</p>
                            <p class="text-3xl font-bold text-gray-900 mt-2">{{ $totalNilai }}</p>
                        </div>
                        <div class="bg-blue-100 rounded-full p-3">
                            <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Rata-rata Keseluruhan -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600 font-medium">Rata-rata</p>
                            <p class="text-3xl font-bold text-gray-900 mt-2">{{ $rataRataKeseluruhan }}</p>
                            <span class="inline-block mt-2 px-2 py-1 text-xs font-semibold rounded-full
                                {{ $rataRataKeseluruhan >= 90 ? 'bg-green-100 text-green-800' : '' }}
                                {{ $rataRataKeseluruhan >= 75 && $rataRataKeseluruhan < 90 ? 'bg-blue-100 text-blue-800' : '' }}
                                {{ $rataRataKeseluruhan >= 60 && $rataRataKeseluruhan < 75 ? 'bg-yellow-100 text-yellow-800' : '' }}
                                {{ $rataRataKeseluruhan < 60 ? 'bg-red-100 text-red-800' : '' }}">
                                {{ $rataRataKeseluruhan >= 90 ? 'Excellent' : ($rataRataKeseluruhan >= 75 ? 'Good' : ($rataRataKeseluruhan >= 60 ? 'Average' : 'Need Improvement')) }}
                            </span>
                        </div>
                        <div class="bg-indigo-100 rounded-full p-3">
                            <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Nilai Tertinggi -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600 font-medium">Nilai Tertinggi</p>
                            <p class="text-3xl font-bold text-green-600 mt-2">{{ $nilaiTertinggi }}</p>
                        </div>
                        <div class="bg-green-100 rounded-full p-3">
                            <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Nilai Terendah -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600 font-medium">Nilai Terendah</p>
                            <p class="text-3xl font-bold text-red-600 mt-2">{{ $nilaiTerendah }}</p>
                        </div>
                        <div class="bg-red-100 rounded-full p-3">
                            <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chart & Statistics Per Mapel -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Chart -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                        <svg class="w-5 h-5 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                        Grafik Rata-rata Per Mata Pelajaran
                    </h4>
                    <canvas id="nilaiChart" class="w-full" style="max-height: 300px;"></canvas>
                </div>

                <!-- Statistics Per Mapel -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                        <svg class="w-5 h-5 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                        </svg>
                        Statistik Per Mata Pelajaran
                    </h4>
                    <div class="space-y-4 max-h-80 overflow-y-auto">
                        @forelse($statistikPerMapel as $stat)
                        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition">
                            <div class="flex items-center justify-between mb-2">
                                <h5 class="font-semibold text-gray-900">{{ $stat['mapel'] }}</h5>
                                <span class="px-3 py-1 text-xs font-semibold rounded-full
                                    {{ $stat['rata_rata'] >= 90 ? 'bg-green-100 text-green-800' : '' }}
                                    {{ $stat['rata_rata'] >= 75 && $stat['rata_rata'] < 90 ? 'bg-blue-100 text-blue-800' : '' }}
                                    {{ $stat['rata_rata'] >= 60 && $stat['rata_rata'] < 75 ? 'bg-yellow-100 text-yellow-800' : '' }}
                                    {{ $stat['rata_rata'] < 60 ? 'bg-red-100 text-red-800' : '' }}">
                                    {{ $stat['label'] }}
                                </span>
                            </div>
                            <div class="grid grid-cols-3 gap-2 text-sm">
                                <div>
                                    <p class="text-gray-500">Rata-rata</p>
                                    <p class="font-bold text-indigo-600">{{ $stat['rata_rata'] }}</p>
                                </div>
                                <div>
                                    <p class="text-gray-500">Tertinggi</p>
                                    <p class="font-bold text-green-600">{{ $stat['tertinggi'] }}</p>
                                </div>
                                <div>
                                    <p class="text-gray-500">Terendah</p>
                                    <p class="font-bold text-red-600">{{ $stat['terendah'] }}</p>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-2">Total {{ $stat['jumlah'] }} nilai</p>
                        </div>
                        @empty
                        <p class="text-gray-500 text-center py-4">Belum ada data nilai</p>
                        @endforelse
                    </div>
                </div>
            </div>

            <!-- Detail Nilai Table -->
            <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                <div class="p-6 bg-gradient-to-r from-indigo-500 to-purple-600 border-b">
                    <h4 class="text-lg font-semibold text-white flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                        </svg>
                        Riwayat Nilai Detail
                    </h4>
                </div>

                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tanggal</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mata Pelajaran</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Keterangan</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Guru</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Durasi</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nilai</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            @forelse($nilais as $nilai)
                            <tr class="hover:bg-gray-50 transition">
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                    {{ $nilai->tanggal->format('d/m/Y') }}
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0 h-10 w-10 bg-gradient-to-br from-purple-400 to-indigo-600 rounded-lg flex items-center justify-center">
                                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                            </svg>
                                        </div>
                                        <div class="ml-4">
                                            <div class="text-sm font-medium text-gray-900">{{ $nilai->mapel->nama_mapel }}</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 text-sm text-gray-900">
                                    {{ $nilai->keterangan }}
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="flex items-center">
                                        @if($nilai->guru->photo)
                                            <img src="{{ asset('storage/' . $nilai->guru->photo) }}" class="w-8 h-8 rounded-full object-cover mr-2">
                                        @else
                                            <div class="w-8 h-8 rounded-full bg-gradient-to-br from-green-400 to-teal-600 flex items-center justify-center text-white text-xs font-bold mr-2">
                                                {{ strtoupper(substr($nilai->guru->name, 0, 1)) }}
                                            </div>
                                        @endif
                                        <span class="text-sm text-gray-900">{{ $nilai->guru->name }}</span>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                    {{ $nilai->mapel->durasi }} Jam
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full
                                        {{ $nilai->nilai >= 90 ? 'bg-green-100 text-green-800' : '' }}
                                        {{ $nilai->nilai >= 75 && $nilai->nilai < 90 ? 'bg-blue-100 text-blue-800' : '' }}
                                        {{ $nilai->nilai >= 60 && $nilai->nilai < 75 ? 'bg-yellow-100 text-yellow-800' : '' }}
                                        {{ $nilai->nilai < 60 ? 'bg-red-100 text-red-800' : '' }}">
                                        {{ $nilai->nilai }}
                                    </span>
                                </td>
                            </tr>
                            @empty
                            <tr>
                                <td colspan="6" class="px-6 py-8 text-center">
                                    <div class="flex flex-col items-center justify-center">
                                        <svg class="w-16 h-16 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                        </svg>
                                        <p class="text-gray-500 text-lg font-medium">Belum ada data nilai</p>
                                        <p class="text-gray-400 text-sm mt-1">Nilai akan muncul setelah guru menginput</p>
                                    </div>
                                </td>
                            </tr>
                            @endforelse
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const ctx = document.getElementById('nilaiChart');

        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: @json($chartLabels),
                datasets: [{
                    label: 'Rata-rata Nilai',
                    data: @json($chartData),
                    backgroundColor: @json($chartColors),
                    borderWidth: 0,
                    borderRadius: 8,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += context.parsed.y.toFixed(2);

                                let category = '';
                                if (context.parsed.y >= 90) category = ' (Excellent)';
                                else if (context.parsed.y >= 75) category = ' (Good)';
                                else if (context.parsed.y >= 60) category = ' (Average)';
                                else category = ' (Need Improvement)';

                                return label + category;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            stepSize: 20
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });
    </script>
</x-app-layout>

---

## 4. Mata Pelajaran (Mapel)

### 4.1 Migration Mapel
```bash
php artisan make:migration create_mapels_table
```

**Migration:**
```php
public function up(): void
{
    Schema::create('mapels', function (Blueprint $table) {
        $table->id();
        $table->string('nama_mapel');
        $table->integer('durasi'); // dalam jam
        $table->timestamps();
    });
}
```

### 4.2 Model Mapel
```bash
php artisan make:model Mapel
```

**`app/Models/Mapel.php`:**
```php
protected $fillable = ['nama_mapel', 'durasi'];

public function gurus() {
    return $this->belongsToMany(User::class, 'guru_mapel', 'mapel_id', 'user_id')
                ->withTimestamps();
}

public function nilais() {
    return $this->hasMany(Nilai::class);
}

public function getDurasiTextAttribute() {
    return $this->durasi . ' Jam';
}
```

### 4.3 Controller Mapel
```bash
php artisan make:controller Admin/MapelController
```

**Isi sesuai artifact `controller_mapel`** âœ…

### 4.4 View Mapel
```bash
mkdir -p resources/views/admin/mapels
```

**`resources/views/admin/mapels/index.blade.php`:**
- Copy dari artifact `view_mapels_index` âœ…
- Fitur: CRUD dengan modal, validation unique case-insensitive

### 4.5 Routes
**Tambah ke `routes/web.php` di group admin:**
```php
Route::resource('mapels', \App\Http\Controllers\Admin\MapelController::class);
```

```bash
php artisan migrate
```

---

## 5. Assign Guru ke Mapel

### 5.1 Migration Pivot Table
```bash
php artisan make:migration create_guru_mapel_table
```

**Migration:**
```php
public function up(): void
{
    Schema::create('guru_mapel', function (Blueprint $table) {
        $table->id();
        $table->foreignId('user_id')->constrained('users')->onDelete('cascade');
        $table->foreignId('mapel_id')->constrained('mapels')->onDelete('cascade');
        $table->timestamps();
        $table->unique(['user_id', 'mapel_id']);
    });
}
```

```bash
php artisan migrate
```

### 5.2 Update Model User
**Tambahkan relationship:**
```php
public function mapels() {
    return $this->belongsToMany(Mapel::class, 'guru_mapel', 'user_id', 'mapel_id')
                ->withTimestamps();
}
```

### 5.3 Controller Guru-Mapel
```bash
php artisan make:controller Admin/GuruMapelController
```

**Isi sesuai artifact `controller_admin_guru_mapel`** âœ…

### 5.4 View Assign (Tabel dengan Checkbox Auto-Save)
```bash
mkdir -p resources/views/admin/guru-mapel
```

**`resources/views/admin/guru-mapel/index.blade.php`:**
- Copy dari artifact `view_admin_guru_mapel` âœ…
- Fitur: Tabel checkbox, auto-save AJAX, toast notification

### 5.5 Routes
**Tambah ke routes admin:**
```php
Route::get('/guru-mapel', [\App\Http\Controllers\Admin\GuruMapelController::class, 'index'])->name('guru-mapel.index');
Route::post('/guru-mapel/assign', [\App\Http\Controllers\Admin\GuruMapelController::class, 'assign'])->name('guru-mapel.assign');
Route::post('/guru-mapel/toggle', [\App\Http\Controllers\Admin\GuruMapelController::class, 'toggle'])->name('guru-mapel.toggle');
```

---

## 6. Nilai (Guru)

### 6.1 Migration Nilai
```bash
php artisan make:migration create_nilais_table
```

**Migration:**
```php
public function up(): void
{
    Schema::create('nilais', function (Blueprint $table) {
        $table->id();
        $table->foreignId('guru_id')->constrained('users')->onDelete('cascade');
        $table->foreignId('mapel_id')->constrained('mapels')->onDelete('cascade');
        $table->foreignId('siswa_id')->constrained('users')->onDelete('cascade');
        $table->date('tanggal');
        $table->string('keterangan');
        $table->integer('nilai'); // 0-100
        $table->timestamps();
    });
}
```

```bash
php artisan migrate
```

### 6.2 Model Nilai
```bash
php artisan make:model Nilai
```

**`app/Models/Nilai.php`:**
```php
protected $fillable = [
    'guru_id', 'mapel_id', 'siswa_id',
    'tanggal', 'keterangan', 'nilai',
];

protected $casts = ['tanggal' => 'date'];

public function guru() {
    return $this->belongsTo(User::class, 'guru_id');
}

public function mapel() {
    return $this->belongsTo(Mapel::class);
}

public function siswa() {
    return $this->belongsTo(User::class, 'siswa_id');
}
```

### 6.3 Controllers Guru
```bash
php artisan make:controller Guru/MapelController
php artisan make:controller Guru/NilaiController
```

**Isi sesuai artifact:**
- `controller_guru_mapel` âœ…
- `controller_guru_nilai` âœ…

### 6.4 Views Guru
```bash
mkdir -p resources/views/guru/mapels
mkdir -p resources/views/guru/nilais
```

**Copy views:**
- `guru/mapels/index.blade.php` â†’ artifact `view_guru_mapels` âœ…
- `guru/nilais/index.blade.php` â†’ artifact `view_guru_nilais` âœ…

**Fitur:**
- Daftar mapel yang diampu
- CRUD nilai per mapel dengan modal
- Select2 untuk search siswa
- Nilai max 3 digit (0-100)
- Auto-validation

### 6.5 Routes Guru
**Tambah setelah routes admin:**
```php
Route::middleware(['auth', 'checkrole:guru'])->prefix('guru')->name('guru.')->group(function () {
    Route::get('/dashboard', [GuruDashboard::class, 'index'])->name('dashboard');
    Route::get('/mapels', [\App\Http\Controllers\Guru\MapelController::class, 'index'])->name('mapels.index');
    Route::get('/mapels/{mapel}/nilais', [\App\Http\Controllers\Guru\NilaiController::class, 'index'])->name('nilais.index');
    Route::post('/mapels/{mapel}/nilais', [\App\Http\Controllers\Guru\NilaiController::class, 'store'])->name('nilais.store');
    Route::put('/mapels/{mapel}/nilais/{nilai}', [\App\Http\Controllers\Guru\NilaiController::class, 'update'])->name('nilais.update');
    Route::delete('/mapels/{mapel}/nilais/{nilai}', [\App\Http\Controllers\Guru\NilaiController::class, 'destroy'])->name('nilais.destroy');
});
```

---

## 7. Dashboard Siswa

### 7.1 Controller Dashboard Siswa
**Update `app/Http/Controllers/Siswa/DashboardController.php`:**
- Copy dari artifact `controller_siswa_dashboard` âœ…

**Fitur:**
- Statistik keseluruhan (total nilai, rata-rata, tertinggi, terendah)
- Statistik per mapel (gabungan semua guru)
- Label kategori: Excellent (â‰¥90), Good (75-89), Average (60-74), Need Improvement (<60)

### 7.2 View Dashboard Siswa
**`resources/views/siswa/dashboard.blade.php`:**
- Copy dari artifact `view_siswa_dashboard` âœ…

**Fitur:**
- Cards statistik
- Grafik line chart per mapel (Chart.js)
- Tabel 25 nilai terbaru
- Color-coded badges

### 7.3 Routes Siswa
**Sudah ada di routes dasar** âœ…

---

## Troubleshooting

### 1. Seeder Tidak Jalan
```bash
composer dump-autoload -o
php artisan migrate:fresh --seed
```

### 2. Database Error
```bash
# Cek file database.sqlite ada
dir database\

# Clear config
php artisan config:clear
```

### 3. Migration Error
```bash
# Fresh migrate
php artisan migrate:fresh
```

### 4. Foto Tidak Muncul
```bash
php artisan storage:link
```

### 5. NPM Error
```bash
rm -rf node_modules  # Git Bash
# atau
rd /s node_modules   # CMD

npm install
npm run dev
```

### 6. AJAX Error (Assign Guru)
- Pastikan CSRF token ada
- Cek route sudah terdaftar: `php artisan route:list`
- Cek console browser untuk error detail

### 7. Select2 Tidak Jalan
- Pastikan jQuery sudah load
- Pastikan Select2 CSS & JS sudah di-include
- Init Select2 setelah modal terbuka

---

## ðŸ“‹ Checklist Fitur Lengkap

### Admin
- âœ… CRUD User (dengan foto profile)
- âœ… CRUD Mapel (unique validation)
- âœ… Assign Guru ke Mapel (tabel checkbox auto-save)
- âœ… View detail user
- âœ… Dashboard admin

### Guru
- âœ… Lihat mapel yang diampu
- âœ… CRUD nilai per mapel
- âœ… Search siswa dengan Select2
- âœ… Validation nilai (0-100, max 3 digit)
- âœ… Dashboard guru

### Siswa
- âœ… Lihat nilai semua mapel
- âœ… Statistik keseluruhan & per mapel
- âœ… Grafik line chart
- âœ… Tabel 25 nilai terbaru
- âœ… Dashboard siswa dengan kategori

### Global
- âœ… Multi-role authentication
- âœ… Profile management (semua role)
- âœ… Upload foto profile
- âœ… Responsive design
- âœ… Modern UI dengan Tailwind

---

## ðŸš€ Quick Start (Full Project)

```bash
# 1. Clone/Setup Project
composer install
npm install

# 2. Environment
cp .env.example .env
# Edit DB_CONNECTION=sqlite dan DB_DATABASE path

# 3. Generate Key
php artisan key:generate

# 4. Database
type nul > database\database.sqlite
php artisan migrate:fresh --seed
php artisan storage:link

# 5. Run
npm run dev      # Terminal 1
php artisan serve # Terminal 2

# 6. Login
Admin: admin@gmail.com / password
Guru: guru@gmail.com / password
Siswa: siswa@gmail.com / password
```

---

**ðŸ“Œ Catatan:**
- Semua artifact sudah tersedia di chat sebelumnya
- Copy paste artifact sesuai nama file yang disebutkan
- Pastikan struktur folder sesuai
- Test setiap fitur setelah implementasi

**âœ¨ Happy Coding!**
